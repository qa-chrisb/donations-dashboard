---
import "../styles/global.css";

const {
  title = "Donations",
  description = "A compact telemetry surface for philanthropic flows.",
  updatedAt,
} = Astro.props;

const isoUpdatedAt = typeof updatedAt === "string" ? updatedAt : null;

const formattedUpdatedAt = isoUpdatedAt
  ? new Intl.DateTimeFormat("en-GB", {
      dateStyle: "medium",
      timeStyle: "short",
      timeZone: "UTC",
    }).format(new Date(isoUpdatedAt))
  : null;
---

<!doctype html>
<html lang="en" class="bg-stone-950 text-stone-100">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="theme-color" content="#020617" />
  </head>
  <body class="bg-stone-950 text-stone-100">
    <div class="relative isolate overflow-hidden">
      <div
        class="pointer-events-none absolute inset-0 opacity-70"
        aria-hidden="true"
        style="background: radial-gradient(circle at top, rgba(16, 185, 129, 0.2), transparent 55%), radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.15), transparent 45%);"
      >
      </div>

      <div
        class="relative mx-auto flex min-h-screen max-w-5xl flex-col gap-10 px-6 py-10 sm:px-8 lg:px-10"
      >
        <header class="flex flex-col gap-3 border-b border-white/10 pb-6">
          <div class="flex flex-col gap-1">
            <p
              class="text-xs font-semibold uppercase tracking-[0.35em] text-emerald-300"
            >
              portfolio build
            </p>
            <h1 class="text-3xl font-semibold text-white sm:text-4xl">
              {title}
            </h1>
            <p class="text-base text-stone-300 sm:text-lg">{description}</p>
          </div>
          {
            formattedUpdatedAt && isoUpdatedAt && (
              <p class="text-sm text-stone-400">
                Last refreshed
                <time datetime={isoUpdatedAt} class="font-medium text-white">
                  {formattedUpdatedAt} UTC
                </time>
              </p>
            )
          }
        </header>

        <main class="flex-1">
          <slot />
        </main>

        <footer class="border-t border-white/10 pt-6 text-sm text-stone-400">
          <p>
            Built with Astro, Tailwind, and Preact - optimised for quick audits
            and donor storytelling.
          </p>
        </footer>
      </div>
    </div>
  </body>
</html>
